block = "MySQL"

[commands]
mysql.extended-status = "/usr/local/bin/mysqladmin -u root extended-status\
 | tail -n +4\
 | awk -F' *\\\\| *'\
  '/( Bytes_(received|sent) | Com_(select|insert|update|delete|replace) | Created_tmp_| Open(_files|_tables|ed_tables) | Qcache_hits | Slow_queries )/\
  {print \"MY_\"$2, $3}'"
mysql.variables = "/usr/local/bin/mysqladmin -u root variables\
 | tail -n +4\
 | awk -F' *\\\\| *'\
  '/ table_open_cache / {print \"MY_\"$2, $3}\
  / max_connections / {print \"MY_\"$2, $3}'"
mysql.status = "/usr/local/bin/mysqladmin -u root status\
 | awk -F'  '\
  '{for (i=1;i<=NF;i++)\
    {if(match($i, /^Threads/)){
      gsub(\" \", \"_\", $i); gsub(\":_\", \" \", $i); print \"MY_\"$i\
    }}
  }'"

[mysql_bytes]
class = "AreaChart"
title = "MySQL troughput"
options[vAxis.title] = "bytes received (-) / sent (+) per second"
MY_Bytes_sent[title] = "sent"
MY_Bytes_sent[type] = rate
MY_Bytes_received[title] = "received"
MY_Bytes_received[type] = rate
MY_Bytes_received[eval] = "-MY_Bytes_received"

[mysql_queries]
class = "AreaChart"
title = "MySQL queries"
options[vAxis.title] = "queries"
options[isStacked] = true
MY_Com_select[title] = "select"
MY_Com_select[type] = increment
MY_Com_insert[title] = "insert"
MY_Com_insert[type] = increment
MY_Com_update[title] = "update"
MY_Com_update[type] = increment
MY_Com_delete[title] = "delete"
MY_Com_delete[type] = increment
MY_Com_replace[title] = "replace"
MY_Com_replace[type] = increment
MY_Qcache_hits[title] = "query cache"
MY_Qcache_hits[type] = increment

[mysql_slow_queries]
class = "AreaChart"
title = "MySQL slow queries"
options[vAxis.title] = "slow queries"
MY_Slow_queries[title] = "slow queries"
MY_Slow_queries[type] = increment

[mysql_threads]
class = "ComboChart"
title = "MySQL threads"
options[vAxis.title] = "threads"
options[seriesType] = "area"
MY_Threads[title] = "threads"
MY_Threads[type] = value
MY_max_connections[title] = "max threads"
MY_max_connections[type] = value
MY_max_connections[series.type] = "line"
MY_max_connections[series.lineDashStyle.0] = 6
MY_max_connections[series.lineDashStyle.1] = 2

[mysql_files_tables]
class = "ComboChart"
title = "MySQL files and tables"
options[vAxis.title] = "tables"
options[isStacked] = true
options[seriesType] = "area"
MY_Open_files[title] = "open files"
MY_Open_files[type] = value
MY_Open_tables[title] = "open tables"
MY_Open_tables[type] = value
MY_Opened_tables[title] = "opened tables"
MY_Opened_tables[type] = value
MY_table_open_cache[title] = "table open cache"
MY_table_open_cache[type] = value
MY_table_open_cache[series.type] = "line"
MY_table_open_cache[series.lineDashStyle.0] = 6
MY_table_open_cache[series.lineDashStyle.1] = 2

[mysql_tmp_tables]
class = "AreaChart"
title = "MySQL temporary objects"
options[vAxis.title] = "objects / second"
options[isStacked] = true
MY_Created_tmp_disk_tables[title] = "C_t_disk_tables"
MY_Created_tmp_disk_tables[type] = rate
MY_Created_tmp_files[title] = "C_t_files"
MY_Created_tmp_files[type] = rate
MY_Created_tmp_tables[title] = "C_t_tables"
MY_Created_tmp_tables[type] = rate
